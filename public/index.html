<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Core Meta -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Note & Email Generator — Offline, No Login Required</title>
<meta name="description" content="Offline note and email generator. Create notes or email drafts quickly—no signup, client-side only, copy to clipboard in one click." />
<link rel="canonical" href="https://offlinemodsemailgenerator.vercel.app/" />
<meta name="robots" content="index,follow" />

<!-- Open Graph -->
<meta property="og:type" content="website" />
<meta property="og:title" content="Note & Email Generator — Offline, No Login" />
<meta property="og:description" content="Generate notes or email templates instantly, completely offline, no signup required. Fast, simple, client-side." />
<meta property="og:url" content="https://offlinemodsemailgenerator.vercel.app/" />
<meta property="og:image" content="https://offlinemodsemailgenerator.vercel.app/og-default.png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Offline Note & Email Generator" />
<meta name="twitter:description" content="Create notes or email drafts offline—no login needed. Copy in one click." />
<meta name="twitter:image" content="https://offlinemodsemailgenerator.vercel.app/og-default.png" />
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Note & Email Generator",
  "description": "Offline note and email generator — create drafts instantly without signup."
}
</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CB9FXW0FC3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CB9FXW0FC3');
</script>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #0f1115;
        color: #e4e6eb;
        margin: 0;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }
      .container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        padding: 20px;
      }
      .panel {
        flex: 1 1 400px;
        min-width: 300px;
        max-width: 100%;
        background: #1c1f26;
        border-radius: 12px;
        padding: 20px;
        display: flex;
        flex-direction: column;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      }
      h2 {
        margin-top: 0;
      }
      .change-block {
        margin-bottom: 15px;
        padding: 10px;
        border: 1px solid #333;
        border-radius: 8px;
        background: #2a2e38;
      }
      input,
      textarea {
        width: 100%;
        padding: 8px;
        margin-top: 5px;
        margin-bottom: 10px;
        border: none;
        border-radius: 6px;
        background: #0f1115;
        color: #fff;
        overflow: hidden;
        transition: height 0.2s ease;
        box-sizing: border-box;
      }
      input {
        max-height: 150px;
      }
      textarea {
        resize: none;
        min-height: 60px;
        max-height: 40vh;
      }
      input.scrollable,
      textarea.scrollable {
        overflow-y: auto;
      }
      button {
        background: linear-gradient(135deg, #4f8cff, #7c4dff);
        border: none;
        padding: 10px 15px;
        color: #fff;
        border-radius: 8px;
        cursor: pointer;
        margin-right: 10px;
        margin-top: 5px;
      }
      button:hover {
        opacity: 0.9;
      }
      pre {
        background: #0f1115;
        border-radius: 8px;
        padding: 10px;
        white-space: pre-wrap;
        flex: 1;
        overflow-y: auto;
      }
      .output-controls {
        margin-top: 10px;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }
      /* Modal */
      .modal {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.7);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
      }
      .modal-content {
        background: #1c1f26;
        padding: 20px;
        border-radius: 10px;
        max-width: 300px;
        text-align: center;
      }
      .modal-content button {
        margin-top: 10px;
      }
      /* Loading Spinner */
      .spinner {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: #7c4dff;
        animation: spin 1s ease-in-out infinite;
        vertical-align: middle;
        margin-right: 8px;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
      .loading {
        display: flex;
        align-items: center;
        color: #aaa;
        font-style: italic;
      }

      /* Responsive adjustments */
      @media (max-width: 900px) {
        .container {
          flex-direction: column;
          padding: 15px;
        }
        .panel {
          flex: 1 1 100%;
          max-width: 100%;
        }
        button {
          width: 100%;
          margin-right: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- LEFT: Note Generator -->
      <div class="panel">
        <h2>Note Generator</h2>
        <form id="noteForm">
          <div class="change-block">
            <label>URL / Page Edited</label>
            <input type="text" placeholder="https://example.com/page" required/><br />
            <label>What changes were made?</label>
            <textarea placeholder="Describe the changes..." required></textarea>
          </div>
        </form>
        <div>
          <button type="button" id="addFieldBtn">+ Add Another Change</button>
          <button type="button" id="generateBtn">Generate</button>
        </div>
        <h3>Generated Note</h3>
        <pre id="noteOutput">Nothing yet...</pre>
        <div class="output-controls">
          <button type="button" id="copyNoteBtn">Copy Note</button>
          <button type="button" id="clearAllBtn">Clear All</button>
        </div>
      </div>

      <!-- RIGHT: Email Preview -->
      <div class="panel">
        <h2>Email Preview</h2>
        <pre id="emailOutput">Nothing yet...</pre>
        <div class="output-controls">
          <button type="button" id="copyEmailBtn">Copy Email</button>
          <button type="button" id="clearEmailBtn">Clear Email</button>
        </div>
      </div>
    </div>

    <!-- Modal -->
    <div id="confirmModal" class="modal">
      <div class="modal-content">
        <p>Are you sure you want to clear everything?</p>
        <button id="confirmClear">Yes, Clear</button>
        <button id="cancelClear">Cancel</button>
      </div>
    </div>

    <script>
      const form = document.getElementById("noteForm");
      const addFieldBtn = document.getElementById("addFieldBtn");
      const generateBtn = document.getElementById("generateBtn");
      const noteOutput = document.getElementById("noteOutput");
      const emailOutput = document.getElementById("emailOutput");

      const copyNoteBtn = document.getElementById("copyNoteBtn");
      const copyEmailBtn = document.getElementById("copyEmailBtn");
      const clearAllBtn = document.getElementById("clearAllBtn");
      const clearEmailBtn = document.getElementById("clearEmailBtn");

      const modal = document.getElementById("confirmModal");
      const confirmClear = document.getElementById("confirmClear");
      const cancelClear = document.getElementById("cancelClear");

      function autoResizeField(field) {
        field.style.height = "auto";
        const maxH = window.innerHeight * 0.25; // max 25% of viewport height
        const scrollHeight = field.scrollHeight;
        if (scrollHeight > maxH) {
          field.style.height = maxH + "px";
          field.classList.add("scrollable");
        } else {
          field.style.height = scrollHeight + "px";
          field.classList.remove("scrollable");
        }
      }

      function attachAutoResize(form) {
        const fields = form.querySelectorAll("input, textarea");
        fields.forEach((field) => {
          field.addEventListener("input", () => autoResizeField(field));
          autoResizeField(field);
        });
      }

      attachAutoResize(form);

      addFieldBtn.addEventListener("click", () => {
        const block = document.createElement("div");
        block.className = "change-block";
        block.innerHTML = `
          <label>URL / Page Edited</label>
          <input type="text" placeholder="https://example.com/page" />
          <label>What changes were made?</label>
          <textarea placeholder="Describe the changes..."></textarea>
        `;
        form.appendChild(block);
        attachAutoResize(form);
      });

      generateBtn.addEventListener("click", async () => {
        const blocks = form.querySelectorAll(".change-block");
        let notesContent = "";

        blocks.forEach((block) => {
          const url = block.querySelector("input").value.trim();
          const desc = block.querySelector("textarea").value.trim();
          if (url && desc) {
            notesContent += `Page/URL: ${url}\n\n${desc}\n\n`;
          }
        });

        const formattedNote = `-- FULFILLMENT MOD COMPLETED --\n\nCOMPLETED:\n\n${notesContent}NEXT STEPS:\n\nAdvised the client to submit additional changes through site changes form or call in for further support.\nRequest closed and being reviewed by quality control.`;

        noteOutput.textContent = formattedNote || "Nothing yet...";

        if (notesContent) {
          emailOutput.innerHTML =
            '<div class="loading"><div class="spinner"></div>Generating email...</div>';
          try {
            const res = await fetch("/api/generate-email", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ notes: formattedNote }),
            });
            const data = await res.json();
            emailOutput.textContent = data.email || "Error generating email.";
          } catch (err) {
            emailOutput.textContent = "Error contacting server.";
            console.error(err);
          }
        }
      });

      copyNoteBtn.addEventListener("click", () => {
        navigator.clipboard.writeText(noteOutput.textContent);
      });

      copyEmailBtn.addEventListener("click", () => {
        navigator.clipboard.writeText(emailOutput.textContent);
      });

      clearAllBtn.addEventListener("click", () => {
        modal.style.display = "flex";
      });

      confirmClear.addEventListener("click", () => {
        form.innerHTML = `
          <div class="change-block">
            <label>URL / Page Edited</label>
            <input type="text" placeholder="https://example.com/page" />
            <label>What changes were made?</label>
            <textarea placeholder="Describe the changes..."></textarea>
          </div>
        `;
        noteOutput.textContent = "Nothing yet...";
        emailOutput.textContent = "Nothing yet...";
        modal.style.display = "none";
        attachAutoResize(form);
      });

      cancelClear.addEventListener("click", () => {
        modal.style.display = "none";
      });

      clearEmailBtn.addEventListener("click", () => {
        emailOutput.textContent = "Nothing yet...";
      });
    </script>
  </body>
</html>
